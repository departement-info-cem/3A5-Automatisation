<!doctype html>
<html lang="fr" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-labo/labo-ad">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Environnement de lab Active Directory | 420-3A5-EM - Automatisation de tâches</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://info.cegepmontpetit.ca/3A5-Automatisation/labo/labo-ad"><meta data-rh="true" name="docusaurus_locale" content="fr"><meta data-rh="true" name="docsearch:language" content="fr"><meta data-rh="true" name="keywords" content="420-3A5-EM - Automatisation de tâches, Site de référence du cours d&#x27;automatisation de tâches&#x27;, informatique, technique, cégep, cegep, édouard-montpetit, edouard-montpetit, édouard montpetit, edouard montpetit"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Environnement de lab Active Directory | 420-3A5-EM - Automatisation de tâches"><meta data-rh="true" name="description" content="Dans ce cours, vous devez monter un environnement de laboratoire virtualisé dans Labinfo. Voici comment le répliquer simplement avec des commandes PowerShell."><meta data-rh="true" property="og:description" content="Dans ce cours, vous devez monter un environnement de laboratoire virtualisé dans Labinfo. Voici comment le répliquer simplement avec des commandes PowerShell."><link data-rh="true" rel="icon" href="/3A5-Automatisation/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://info.cegepmontpetit.ca/3A5-Automatisation/labo/labo-ad"><link data-rh="true" rel="alternate" href="https://info.cegepmontpetit.ca/3A5-Automatisation/labo/labo-ad" hreflang="fr"><link data-rh="true" rel="alternate" href="https://info.cegepmontpetit.ca/3A5-Automatisation/labo/labo-ad" hreflang="x-default"><link rel="stylesheet" href="/3A5-Automatisation/assets/css/styles.e683f185.css">
<link rel="preload" href="/3A5-Automatisation/assets/js/runtime~main.feacf08f.js" as="script">
<link rel="preload" href="/3A5-Automatisation/assets/js/main.dc9c861e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Aller au contenu principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Aller au contenu principal</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Ouvrir/fermer la barre de navigation" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/3A5-Automatisation/"><div class="navbar__logo"><img src="/3A5-Automatisation/img/logo.svg" alt="Logo CEM" class="themedImage_ToTc themedImage--light_HNdA"><img src="/3A5-Automatisation/img/logo.svg" alt="Logo CEM" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">420-3A5-EM - Automatisation de tâches</b></a><a class="navbar__item navbar__link" href="/3A5-Automatisation/cours/r01">Cours</a><a class="navbar__item navbar__link" href="/3A5-Automatisation/tp/tp1">Travaux Pratiques</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/3A5-Automatisation/labo/labo-ad">Laboratoires</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Basculer entre le mode sombre et clair (actuellement mode clair)" aria-label="Basculer entre le mode sombre et clair (actuellement mode clair)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Retour au début de la page" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/3A5-Automatisation/labo/labo-ad">Laboratoire AD</a></li></ul></nav><button type="button" title="Réduire le menu latéral" aria-label="Réduire le menu latéral" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Fil d&#x27;Ariane"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Page d&#x27;accueil" class="breadcrumbs__link" href="/3A5-Automatisation/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Laboratoire AD</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Sur cette page</button></div><div class="theme-doc-markdown markdown"><h1>Environnement de lab Active Directory</h1><p>Dans ce cours, vous devez monter un environnement de laboratoire virtualisé dans Labinfo. Voici comment le répliquer simplement avec des commandes PowerShell.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="architecture-de-lenvironnement-de-labo">Architecture de l&#x27;environnement de labo<a href="#architecture-de-lenvironnement-de-labo" class="hash-link" aria-label="Lien direct vers Architecture de l&#x27;environnement de labo" title="Lien direct vers Architecture de l&#x27;environnement de labo">​</a></h2><p>Le diagramme ci-dessous montre le plan conceptuel du réseau que vous devrez concevoir dans votre environnement virtuel.</p><p><img loading="lazy" alt="Architecture de l&amp;#39;environnement de laboratoire" src="/3A5-Automatisation/assets/images/architecture-labo-57fb19f15bd5b8beb7951dc07f347217.svg" width="652" height="241" class="img_ev3q"></p><p>Il sera composé des machines virtuelles suivantes:</p><table><thead><tr><th>Hôte</th><th>Fonction</th><th>Adresse IP</th><th>Modèle (labinfo)</th></tr></thead><tbody><tr><td>PFSENSE</td><td>Passerelle / NAT</td><td>192.168.21.1</td><td>MODELE_pfSense (Sans DHCP)</td></tr><tr><td>DC01</td><td>Contrôleur de domaine et serveur DHCP</td><td>192.168.21.10</td><td>MODELE_WindowsServer2022_Datacenter_x64_FR</td></tr><tr><td>SRV01</td><td>Serveur membre générique</td><td>192.168.21.20</td><td>MODELE_WindowsServer2022_Datacenter_x64_FR</td></tr><tr><td>SRV02</td><td>Serveur membre générique</td><td>192.168.21.21</td><td>MODELE_WindowsServer2022_Datacenter_x64_FR</td></tr><tr><td>PC0001</td><td>Poste client</td><td>192.168.21.<em>(dyn)</em></td><td>MODELE_Windows10-22H2_Education_x64_FR</td></tr><tr><td>PC0002</td><td>Poste client</td><td>192.168.21.<em>(dyn)</em></td><td>MODELE_Windows10-22H2_Education_x64_FR</td></tr><tr><td>PCDEV</td><td>Poste client</td><td>192.168.21.<em>(dyn)</em></td><td>MODELE_Windows10-22H2_Education_x64_FR</td></tr></tbody></table><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>astuce</div><div class="admonitionContent_S0QG"><p>Pour que vos VM soient organisées dans un même bloc dans Labinfo, ajoutez le préfixe <code>3A5-xx-</code> devant le nom des VM dans vSphere (où <em>xx</em> représente vos initiales).</p><p><img loading="lazy" src="data:image/png;base64,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" width="223" height="216" class="img_ev3q"></p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="montage-de-la-passerelle-pfsense">Montage de la passerelle (pfSense)<a href="#montage-de-la-passerelle-pfsense" class="hash-link" aria-label="Lien direct vers Montage de la passerelle (pfSense)" title="Lien direct vers Montage de la passerelle (pfSense)">​</a></h2><p>Dans l&#x27;environnement Labinfo, vous avez un profil Large, comme en témoigne le nom de votre profil qui commence par <code>L-</code>. Vous avez donc dix réseaux privés qui vous sont attribués et que vous pouvez utiliser à votre guise. Vous pouvez brancher plusieurs de vos VM dans un même réseau privé et elles pourront communiquer entre elles. Toutefois, ces réseaux sont complètement isolés et ne sont pas routés vers Internet. Pour offrir un moyen d&#x27;accès à Internet aux machines dans un de vos réseaux privés, vous devez y déposer une passerelle.</p><p>Dans votre environnement de laboratoire, vous devez placer une VM entre un réseau offrant une connectivité Internet et un réseau privé. Les notions derrière cette technologique seront vues dans un autre cours.</p><p>Tout d&#x27;abord, créez une nouvelle machine virtuelle basée sur le modèle <strong>MODELE_pfSense (Sans DHCP)</strong>. </p><p>Puis modifiez ses paramètres matériels. Cette machine est dotée de deux cartes d&#x27;interface réseau matérielles virtualisées. La première interface est appelée &quot;WAN&quot; et est connectée à Internet (<em>Acces-Internet-1</em>). La deuxième interface est appelée &quot;LAN&quot; et est connectée dans le réseau privé interne. Vous n&#x27;avez qu&#x27;à choisir un de vos dix subnets privés et utiliser le même pour chacune de vos VM. Les réseaux privés sont nommés <code>L-###-01</code> à <code>L-###-10</code>.</p><p><img loading="lazy" alt="pfSense NIC" src="/3A5-Automatisation/assets/images/pfsense-nics-9080d3a4e2daed398559e5f3b7f5072b.png" width="748" height="360" class="img_ev3q"></p><p>Ensuite, démarrez la VM. Vous pouvez accéder à la console en cliquant sur &quot;Lancer Remote Console&quot;.</p><p><img loading="lazy" alt="Exécution de la VM pfSense" src="/3A5-Automatisation/assets/images/pfsense-run-81974d88e2d5daa802f74bca0732b8a5.png" width="785" height="327" class="img_ev3q"></p><p>Sur sa console, on peut y voir un écran d&#x27;information et un menu d&#x27;administration, mais la VM est déjà configurée alors on n&#x27;a pas à y toucher. Prenez toutefois note de l&#x27;adresse IP LAN. On y retrouve l&#x27;adresse <code>192.168.21.1/24</code>. Ce qui signifie que l&#x27;adresse IP de cette machine est <code>192.168.21.1</code> (l&#x27;adresse de la passerelle par défaut des machines situées dans le même réseau local) et que la partie réseau de l&#x27;adresse IP est de 24 bits (donc un masque de sous-réseau de <code>255.255.255.0</code>). Ce sera à considérer lorsque vous monterez d&#x27;autres machines dans ce réseau. Puis laissez simplement la machine allumée; tant qu&#x27;elle est allumée, elle assurera la liaison entre le réseau local et Internet.</p><p><img loading="lazy" alt="Console pfsense" src="/3A5-Automatisation/assets/images/pfsense-console-9773a4d63d6b85a0f2540cb64b264b4e.png" width="730" height="202" class="img_ev3q"></p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>astuce</div><div class="admonitionContent_S0QG"><p>Pour sauver des ressources dans LabInfo, la DiSTI a programmé un script qui met automatiquement hors tension toutes les VM à chaque nuit. Vous pouvez protéger vos VM de ce mécanisme. Je vous le conseille pour votre passerelle et votre contrôleur de domaine.</p><p>Pour activer cette protection, il faut simplement attribuer la balise &quot;Ne pas fermer&quot;.</p><p><img loading="lazy" alt="Balise &amp;quot;ne pas fermer&amp;quot;" src="/3A5-Automatisation/assets/images/balise-ne-pas-fermer-cde5b2c03429d0e62eebdf91ddc2b450.png" width="1114" height="413" class="img_ev3q"></p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="montage-du-contrôleur-de-domaine">Montage du contrôleur de domaine<a href="#montage-du-contrôleur-de-domaine" class="hash-link" aria-label="Lien direct vers Montage du contrôleur de domaine" title="Lien direct vers Montage du contrôleur de domaine">​</a></h2><p>Pour créer un domaine, il faut installer le rôle des Services de domaine Active Directory sur un serveur, puis effectuer sa promotion à un contrôleur de domaine. Voici comment on procède.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="étape-1-clonage-de-la-machine-virtuelle">Étape 1: Clonage de la machine virtuelle<a href="#étape-1-clonage-de-la-machine-virtuelle" class="hash-link" aria-label="Lien direct vers Étape 1: Clonage de la machine virtuelle" title="Lien direct vers Étape 1: Clonage de la machine virtuelle">​</a></h3><p>La première étape consiste à installer et configurer une édition Serveur de Windows. Pour le laboratoire, utilisez le modèle <strong>MODELE_WindowsServer2022_Datacenter_x64_FR</strong> pour créer votre VM. Assurez-vous de brancher son adaptateur réseau dans <code>L-###-##</code> (le réseau local privé que vous avez choisi lors du montage de votre passerelle).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="étape-2-changement-du-nom-dhôte">Étape 2: Changement du nom d&#x27;hôte<a href="#étape-2-changement-du-nom-dhôte" class="hash-link" aria-label="Lien direct vers Étape 2: Changement du nom d&#x27;hôte" title="Lien direct vers Étape 2: Changement du nom d&#x27;hôte">​</a></h3><p>À l&#x27;installation du système d&#x27;exploitation, il est d&#x27;usage de modifier le nom d&#x27;hôte de la machine. Le nom d&#x27;hôte de Windows à son installation est généré aléatoirement et il est préférable que les machines de notre environnement aient un nom représentatif de leur rôle. Il est un bon réflexe de le faire au tout début du processus de montage, car il est plus compliqué changer le nom d&#x27;un système après sa promotion. Je vous recommande de le faire aussitôt le système d&#x27;exploitation installé.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">Rename-Computer</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">NewName </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;DC01&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">Restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>astuce</div><div class="admonitionContent_S0QG"><p>Vous pouvez omettre le paramètre <code>-Restart</code> si vous voulez éviter que le serveur ne redémarre automatiquement.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="étape-3-configuration-du-réseau">Étape 3: Configuration du réseau<a href="#étape-3-configuration-du-réseau" class="hash-link" aria-label="Lien direct vers Étape 3: Configuration du réseau" title="Lien direct vers Étape 3: Configuration du réseau">​</a></h3><p>Lors de l&#x27;installation de Windows, le client DHCP est activé par défaut tant pour l&#x27;assignation d&#x27;une adresse IP que pour ses résolveurs DNS. Il est généralement une bonne pratique de désactiver le client DHCP sur les serveurs et de plutôt opter pour une assignation statique.</p><p>On a l&#x27;habitude de voir les configurations IP et DNS comme une seule et même catégorie de paramètres, puisqu&#x27;ils sont configurables au même endroit dans l&#x27;interface graphique, mais avec PowerShell, on les configure avec deux commandes distinctes.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="identification-de-linterface">Identification de l&#x27;interface<a href="#identification-de-linterface" class="hash-link" aria-label="Lien direct vers Identification de l&#x27;interface" title="Lien direct vers Identification de l&#x27;interface">​</a></h4><p>Tout d&#x27;abord, il nous faut connaître le nom de l&#x27;interface à configurer. Par défaut, Windows attribue les noms &quot;Ethernet0&quot;, &quot;Ethernet1&quot;, et ainsi de suite, selon l&#x27;ordre de leur découverte par l&#x27;énumération <em>Plug-and-Play</em>. Si le serveur possède plus d&#x27;une interface ethernet, identifiez d&#x27;abord celle qui assurera la connectivité au réseau de production.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">Get-NetAdapter</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Get-NetAdapters" src="/3A5-Automatisation/assets/images/netadapters-77696ee3708d8ca47dacc09be0b7d47d.png" width="882" height="223" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="assignation-de-ladresse-ip">Assignation de l&#x27;adresse IP<a href="#assignation-de-ladresse-ip" class="hash-link" aria-label="Lien direct vers Assignation de l&#x27;adresse IP" title="Lien direct vers Assignation de l&#x27;adresse IP">​</a></h4><p>Ensuite, vous pourrez procéder à la configuration IP de cette interface. Dans cet exemple, j&#x27;ai isolé les paramètres propres à l&#x27;adressage IP dans un <em>hashtable</em> afin de la passer par <em>splatting</em>. Assurez-vous que l&#x27;adresse IP, le masque de sous-réseau ainsi que la passerelle par défaut correspondent à votre environnement.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token variable" style="color:rgb(9, 134, 88)">$IPAddressSplat</span><span class="token plain"> = @</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    IPAddress      = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;192.168.21.10&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    PrefixLength   = 24    </span><span class="token comment" style="color:rgb(0, 128, 0)"># Équivalent à 255.255.255.0 (/24)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    DefaultGateway = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;192.168.21.1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    AddressFamily  = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;IPv4&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">New-NetIPAddress</span><span class="token plain"> @IPAddressSplat </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">InterfaceAlias </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Ethernet0&quot;</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="assignation-du-résolveur-dns">Assignation du résolveur DNS<a href="#assignation-du-résolveur-dns" class="hash-link" aria-label="Lien direct vers Assignation du résolveur DNS" title="Lien direct vers Assignation du résolveur DNS">​</a></h4><p>Configurez finalement le résolveur DNS. Puisque ce serveur deviendra ultimement un serveur DNS à la fin du processus de promotion, on va temporairement lui affecter des résolveurs DNS publics. Ceci sera modifié automatiquement lors de la promotion du serveur.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">Set-DnsClientServerAddress</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">ServerAddresses </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;8.8.8.8&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;8.8.4.4&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">InterfaceAlias </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Ethernet0&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="étape-4-promotion">Étape 4: Promotion<a href="#étape-4-promotion" class="hash-link" aria-label="Lien direct vers Étape 4: Promotion" title="Lien direct vers Étape 4: Promotion">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="installation-du-rôle-adds">Installation du rôle ADDS<a href="#installation-du-rôle-adds" class="hash-link" aria-label="Lien direct vers Installation du rôle ADDS" title="Lien direct vers Installation du rôle ADDS">​</a></h4><p>Avant de pouvoir promouvoir le serveur comme contrôleur de domaine, on doit d&#x27;abord installer le rôle <em>Active Directory Domain Services</em>. Plutôt que de le faire par l&#x27;interface graphique, on peut le faire au moyen de cette commande PowerShell.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">Install-WindowsFeature</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">Name AD-Domain-Services </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">IncludeManagementTools</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Cette commande procède également à l&#x27;installation de tous les rôles et fonctionnalités connexes, incluant le module PowerShell pour Active Directory. Vous pourrez ensuite utiliser ces commandes en les important dans votre session PowerShell.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">Import-Module</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">Name ActiveDirectory</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="promotion-du-contrôleur-de-domaine">Promotion du contrôleur de domaine<a href="#promotion-du-contrôleur-de-domaine" class="hash-link" aria-label="Lien direct vers Promotion du contrôleur de domaine" title="Lien direct vers Promotion du contrôleur de domaine">​</a></h4><p>Une fois le rôle installé, on peut procéder à la promotion. La commande <code>Install-ADDSForest</code> permet la création de la forêt par la promotion de son premier contrôleur de domaine. Il faut fournir plusieurs arguments à la commande, l&#x27;exemple suivant les identifie dans un <em>hashtable</em> pour ensuite les passer par <em>splatting</em>.</p><ul><li><p>Les paramètres <code>-DomainName</code> et <code>-DomainNetbiosName</code> désignent respectivement le nom de domaine pleinement qualifié (FQDN) du domaine et le nom NETBIOS, parfois appelé &quot;pré-Windows 2000&quot;.</p></li><li><p>Les paramètres <code>-ForestMode</code> et <code>-DomainMode</code> désignent le niveau fonctionnel de forêt et de domaine respectivement. La valeur &quot;WinThreshold&quot; signifie le niveau fonctionnel le plus élevé pris en charge par le système d&#x27;exploitation.</p></li><li><p>Les paramètres <code>-DatabasePath</code>, <code>-LogPath</code> et <code>-SysvolPath</code> contrôlent l&#x27;emplacement où seront enregistrés la base de données (NTDS.DIT), les journaux transactionnels ainsi que le répertoire SYSVOL qui sera répliqué à travers tous les contrôleurs de domaine.</p></li><li><p>Le paramètres <code>-InstallDNS</code> est un paramètre de type <em>switch</em> qui détermine si le service DNS doit être installé sur ce serveur. On peut aussi activer la délégation DNS avec le paramètre <code>-CreateDnsDelegation</code>. Habituellement, dans un environnement de laboratoire, on souhaite installer le service DNS mais ne pas lui configurer une délégation.</p></li><li><p>Le paramètre <code>-SafeModeAdministratorPassword</code> permet de spécifier un mot de passe pour la récupération d&#x27;urgence. Il doit être fourni pour activer le mode de restauration des services d&#x27;annuaire (DSRM), un sorte de mode sans échec pour contrôleurs de domaine destiné à réparer ou restaurer la base de données Active Directory. Bien qu&#x27;il ne soit que peu utilisé, il peut s&#x27;avérer nécessaire en cas de problème, et il est important de choisir un mot de passe fort et de le garder en lieu sûr (et surtout pas en texte clair). Il admet une chaîne sécurisée (securestring) alors on doit procéder à sa conversion. Concernant le choix du mot de passe dans l&#x27;exemple suivant, on se permet bien sûr des largesses, puisqu&#x27;il s&#x27;agit d&#x27;un environnement de laboratoire.</p></li></ul><p>Le système redémarrera automatiquement une fois l&#x27;opération complétée. Pour ne pas qu&#x27;il redémarre automatiquement, on peut activer le switch <code>-NoRebootOnCompletion</code>.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token variable" style="color:rgb(9, 134, 88)">$ADDSForestSplat</span><span class="token plain"> = @</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    DomainName = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;auto.cemti.ca&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    DomainNetbiosName = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;AUTO&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    ForestMode = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;WinThreshold&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    DomainMode = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;WinThreshold&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    DatabasePath = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;C:\Windows\NTDS&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    LogPath = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;C:\Windows\NTDS&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    SysvolPath = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;C:\Windows\SYSVOL&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    InstallDns = </span><span class="token boolean">$true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    CreateDnsDelegation = </span><span class="token boolean">$false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    SafeModeAdministratorPassword = </span><span class="token function" style="color:rgb(0, 0, 255)">ConvertTo-SecureString</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">String </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Passw0rd&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">AsPlainText </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">Force</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">Install-ADDSForest</span><span class="token plain"> @ADDSForestSplat </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">Force</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>La commande <code>Install-ADDSForest</code> sert à créer le domaine racine de sa forêt, et par conséquent, la forêt elle-même. Si on avait voulu créer un nouveau domaine dans une forêt existante (par exemple, un domaine enfant), il aurait fallu utiliser la commande <code>Install-ADDSDomain</code>. Et si on avait voulu installer un contrôleur de domaine au sein d&#x27;un domaine existant, alors la commande à utiliser aurait été <code>Install-ADDSDomainController</code>.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="vérification-de-la-configuration-dns">Vérification de la configuration DNS<a href="#vérification-de-la-configuration-dns" class="hash-link" aria-label="Lien direct vers Vérification de la configuration DNS" title="Lien direct vers Vérification de la configuration DNS">​</a></h4><p>Lorsque le serveur est promu en tant que contrôleur de domaine, le résolveur DNS configuré dans l&#x27;interface réseau est automatiquement modifié pour 127.0.0.1, l&#x27;adresse <em>loopback</em>, faisant ainsi référence à l&#x27;hôte local. Autrement dit, l&#x27;interface réseau devient un client du service DNS hébergé sur la même machine. Tous les résolveurs DNS configurés auparavant sur l&#x27;interface seront automatiquement inscrits comme redirecteurs DNS dans la configuration du serveur.</p><p><img loading="lazy" alt="Redirecteurs DNS" src="/3A5-Automatisation/assets/images/dns-redirecteurs-15a94301031329dd1d896208253e76f2.png" width="553" height="212" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="étape-5-installation-du-service-dhcp">Étape 5: Installation du service DHCP<a href="#étape-5-installation-du-service-dhcp" class="hash-link" aria-label="Lien direct vers Étape 5: Installation du service DHCP" title="Lien direct vers Étape 5: Installation du service DHCP">​</a></h3><p>Dans ce laboratoire, on souhaite installer, configurer et activer le service DHCP sur le contrôleur de domaine. Habituellement, en production, on préfère que le serveur DHCP soit sur une machine différente d&#x27;un contrôleur de domaine, pour des raisons de sécurité, mais dans un laboratoire on peut se permettre de tricher un peu.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="installation-du-rôle">Installation du rôle<a href="#installation-du-rôle" class="hash-link" aria-label="Lien direct vers Installation du rôle" title="Lien direct vers Installation du rôle">​</a></h4><p>On doit d&#x27;abord installer le rôle <em>Serveur DHCP</em> sur le serveur.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">Install-WindowsFeature</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">Name DHCP </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">IncludeManagementTools</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="activation-du-serveur-dans-adds">Activation du serveur dans ADDS<a href="#activation-du-serveur-dans-adds" class="hash-link" aria-label="Lien direct vers Activation du serveur dans ADDS" title="Lien direct vers Activation du serveur dans ADDS">​</a></h4><p>Si vous installez un serveur DHCP sur une machine membre d&#x27;un domaine Active Directory (ou un contrôleur de domaine), le service DHCP doit obligatoirement être approuvé dans le domaine. Cette opération doit être faite par un administrateur du domaine et doit spécifier le nom DNS du serveur qui hébergera le service DHCP ainsi que son adresse IP.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">Add-DhcpServerInDC</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">DnsName </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;DC01.auto.cemti.ca&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">IPAddress </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;192.168.21.10&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-des-mises-à-jour-dns">Configuration des mises à jour DNS<a href="#configuration-des-mises-à-jour-dns" class="hash-link" aria-label="Lien direct vers Configuration des mises à jour DNS" title="Lien direct vers Configuration des mises à jour DNS">​</a></h4><p>Le serveur DHCP de Windows est capable de communiquer avec le DNS afin d&#x27;enregistrer automatiquement les hôtes qui obtiennent une adresse. Ce n&#x27;est pas obligatoire, mais dans un environnement de domaine, c&#x27;est souvent souhaitable.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">Set</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">DhcpServerv4DnsSetting </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">DynamicUpdates Always </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">DeleteDnsRRonLeaseExpiry </span><span class="token boolean">$True</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="étape-6-configuration-de-létendue-dhcp">Étape 6: Configuration de l&#x27;étendue DHCP<a href="#étape-6-configuration-de-létendue-dhcp" class="hash-link" aria-label="Lien direct vers Étape 6: Configuration de l&#x27;étendue DHCP" title="Lien direct vers Étape 6: Configuration de l&#x27;étendue DHCP">​</a></h3><p>Pour la configuration des étendues, les commandes à utiliser dépendent fortement de la topologie du réseau. Voici les étapes pour un environnement de laboratoire simple à un seul segment (plat). </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="création-de-létendue">Création de l&#x27;étendue<a href="#création-de-létendue" class="hash-link" aria-label="Lien direct vers Création de l&#x27;étendue" title="Lien direct vers Création de l&#x27;étendue">​</a></h4><p>Dans notre exemple, puisque le segment réseau contient à la fois des hôtes dont l&#x27;adresse IP est assignée de manière statique et des hôtes dont elle est assignée dynamiquement, nous définissons une étendue dont la plage d&#x27;adresses va de <em>.100</em> à <em>.254</em>, et on laisse le reste des adresses hors de l&#x27;étendue pour les assignations statiques. Aussi, nous spécifions un état <strong>inactif</strong>; on l&#x27;activera une fois sa configuration complétée.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token variable" style="color:rgb(9, 134, 88)">$DhcpScopeSplat</span><span class="token plain"> = @</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Name       = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;lan&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    StartRange = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;192.168.21.100&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    EndRange   = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;192.168.21.254&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    SubnetMask = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;255.255.255.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    State      = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Inactive&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Add-DhcpServerv4Scope @DhcpScopeSplat</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ajout-doptions-détendue">Ajout d&#x27;options d&#x27;étendue<a href="#ajout-doptions-détendue" class="hash-link" aria-label="Lien direct vers Ajout d&#x27;options d&#x27;étendue" title="Lien direct vers Ajout d&#x27;options d&#x27;étendue">​</a></h4><p>On souhaite également ajouter à cette étendue certaines options, notamment:</p><ul><li>La passerelle par défaut (option 3)</li><li>Le(s) résolveur(s) DNS (option 6)</li><li>Le nom de domaine DNS (option 15)</li></ul><p>Notez que la valeur de <code>ScopeId</code> correspond à <strong>l&#x27;adresse réseau</strong> de l&#x27;étendue.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token variable" style="color:rgb(9, 134, 88)">$DhcpScopeOptionSplat</span><span class="token plain"> = @</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    ScopeId   = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;192.168.21.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Router    = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;192.168.21.1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    DnsServer = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;192.168.21.10&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    DnsDomain = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;auto.cemti.ca&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">Set</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">DhcpServerv4OptionValue @DhcpScopeOptionSplat</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="activation-de-létendue">Activation de l&#x27;étendue<a href="#activation-de-létendue" class="hash-link" aria-label="Lien direct vers Activation de l&#x27;étendue" title="Lien direct vers Activation de l&#x27;étendue">​</a></h4><p>Finalement, une fois la configuration de l&#x27;étendue terminée, on peut activer cette dernière.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">Set</span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">DhcpServerv4Scope </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">ScopeId 192</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">168</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">21</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">0 </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">State Active</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Lorsqu&#x27;on installe le rôle DHCP, le gestionnaire de serveur de Windows affiche un petit drapeau pour nous inciter à activer et configurer le serveur. Comme nous configurons le service par PowerShell, cette notification n&#x27;est pas nécessaire et peut même induire en erreur, en laissant faussement croire qu&#x27;il reste une étape à effectuer. Il suffit alors d&#x27;inscrire au registre que cette opération a été effectuée. </p><p><img loading="lazy" alt="Configuration post-déploiement DHCP" src="data:image/png;base64,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" width="348" height="119" class="img_ev3q"></p><p>Cette opération n&#x27;est pas obligatoire, mais elle est souhaitable dans la mesure où on utilise le gestionnaire de serveur.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token variable" style="color:rgb(9, 134, 88)">$ServerMgrCleanupSplat</span><span class="token plain"> = @</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Path  = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;HKLM:\SOFTWARE\Microsoft\ServerManager\Roles\12&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Name  = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;ConfigurationState&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    Value = 2</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">Set-ItemProperty</span><span class="token plain"> @ServerMgrCleanupSplat</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="montage-des-autres-machines">Montage des autres machines<a href="#montage-des-autres-machines" class="hash-link" aria-label="Lien direct vers Montage des autres machines" title="Lien direct vers Montage des autres machines">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="étape-1-clonage-des-machines-virtuelles">Étape 1: Clonage des machines virtuelles<a href="#étape-1-clonage-des-machines-virtuelles" class="hash-link" aria-label="Lien direct vers Étape 1: Clonage des machines virtuelles" title="Lien direct vers Étape 1: Clonage des machines virtuelles">​</a></h3><p>Pour compléter cet environnement de lab, vous devez monter deux serveurs et deux postes clients.</p><table><thead><tr><th>Hôte</th><th>Adresse IP</th><th>Modèle (labinfo)</th></tr></thead><tbody><tr><td>SRV01</td><td>192.168.21.20</td><td>MODELE_WindowsServer2022_Datacenter_x64_FR</td></tr><tr><td>SRV02</td><td>192.168.21.21</td><td>MODELE_WindowsServer2022_Datacenter_x64_FR</td></tr><tr><td>PC0001</td><td>192.168.21.<em>(dyn)</em></td><td>MODELE_Windows10-22H2_Education_x64_FR</td></tr><tr><td>PC0002</td><td>192.168.21.<em>(dyn)</em></td><td>MODELE_Windows10-22H2_Education_x64_FR</td></tr></tbody></table><p>N&#x27;oubliez pas de connecter leur adaptateur réseau virtuel dans le même réseau privé que vos autres machines.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="étape-2-changement-du-nom-dhôte-1">Étape 2: Changement du nom d&#x27;hôte<a href="#étape-2-changement-du-nom-dhôte-1" class="hash-link" aria-label="Lien direct vers Étape 2: Changement du nom d&#x27;hôte" title="Lien direct vers Étape 2: Changement du nom d&#x27;hôte">​</a></h3><p>Il est toujours important de donner un nom d&#x27;hôte significatif à un serveur ou un poste client. Celui-ci est plus convivial que l&#x27;adresse IP lorsqu&#x27;il est question de rejoindre un serveur pour profiter des services qu&#x27;il offre. Dans le cas d&#x27;un poste client, c&#x27;est important pour faciliter le support. Active Directory crée et maintient automatiquement un enregistrement A pour chaque machine membre du domaine, de sorte qu&#x27;on puisse la résoudre par son nom dans la zone associée au domaine.</p><p>Voici un exemple de commande pour renommer la machine. Évidemment, chaque machine doit avoir un nom différent, autrement il y aura des conflits. Utilisez cette commande pour renommer chacune de vos machines (SRV01, SRV02, PC0001 et PC0002).</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">PowerShell</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Cmd</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">Rename-Computer</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">NewName </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;NOUVEAUNOM&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">Restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-cmd codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cmd codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">wmic computersystem where caption=&#x27;%COMPUTERNAME%&#x27; rename NOUVEAUNOM</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">shutdown /r /t 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="étape-3-configuration-du-réseau-1">Étape 3: Configuration du réseau<a href="#étape-3-configuration-du-réseau-1" class="hash-link" aria-label="Lien direct vers Étape 3: Configuration du réseau" title="Lien direct vers Étape 3: Configuration du réseau">​</a></h3><p>Cette étape est cruciale. Elle est différente pour les serveurs et les postes clients.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="serveurs-configuration-statique">Serveurs: configuration statique<a href="#serveurs-configuration-statique" class="hash-link" aria-label="Lien direct vers Serveurs: configuration statique" title="Lien direct vers Serveurs: configuration statique">​</a></h4><p>Il est généralement recommandé de donner une configuration IP statique à un serveur, contrairement aux postes de travail (clients) qui préfèrent un adressage dynamique avec DHCP. Pour </p><table><thead><tr><th>Paramètre</th><th>SRV01</th><th>SRV02</th></tr></thead><tbody><tr><td>Adresse IP</td><td>192.168.21.20</td><td>192.168.21.21</td></tr><tr><td>Masque de sous-réseau</td><td>255.255.255.0</td><td>255.255.255.0</td></tr><tr><td>Passerelle par défaut</td><td>192.168.21.1</td><td>192.168.21.1</td></tr><tr><td>Résolveur DNS</td><td>192.168.21.10</td><td>192.168.21.10</td></tr></tbody></table><p>Voici le code PowerShell pour configurer l&#x27;adresse IP statique pour le serveur SRV01.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token variable" style="color:rgb(9, 134, 88)">$Adresse</span><span class="token plain">      = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;192.168.21.20&quot;</span><span class="token plain">   </span><span class="token comment" style="color:rgb(0, 128, 0)"># Adresse IPv4 prévue pour SRV01</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token variable" style="color:rgb(9, 134, 88)">$Masque</span><span class="token plain">       =  24               </span><span class="token comment" style="color:rgb(0, 128, 0)"># Équivalent à 255.255.255.0 (/24)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token variable" style="color:rgb(9, 134, 88)">$Passerelle</span><span class="token plain">   = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;192.168.21.1&quot;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(0, 128, 0)"># L&#x27;adresse du pfSense</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token variable" style="color:rgb(9, 134, 88)">$ResolveurDNS</span><span class="token plain"> = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;192.168.21.10&quot;</span><span class="token plain">   </span><span class="token comment" style="color:rgb(0, 128, 0)"># L&#x27;adresse du contrôleur de domaine</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">New-NetIPAddress</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">IPaddress </span><span class="token variable" style="color:rgb(9, 134, 88)">$Adresse</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">PrefixLength </span><span class="token variable" style="color:rgb(9, 134, 88)">$Masque</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">DefaultGateway </span><span class="token variable" style="color:rgb(9, 134, 88)">$Passerelle</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">AdressFamily </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;IPv4&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">InterfaceAlias </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Ethernet0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">Set-DnsClientServerAddress</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">ServerAddresses </span><span class="token variable" style="color:rgb(9, 134, 88)">$ResolveurDNS</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">InterfaceAlias </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Ethernet0&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>astuce</div><div class="admonitionContent_S0QG"><p>Pour être certain du nom de l&#x27;interface, utilisez la commande <code>Get-NetAdapter</code>.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="postes-clients-configuration-dynamique">Postes clients: configuration dynamique<a href="#postes-clients-configuration-dynamique" class="hash-link" aria-label="Lien direct vers Postes clients: configuration dynamique" title="Lien direct vers Postes clients: configuration dynamique">​</a></h4><p>Les postes clients (Windows 10/11) sont habituellement configurés par DHCP. Leur simple présence dans un réseau local où se trouve un serveur DHCP actif déclenchera un processus d&#x27;assignation automatique de configuration IP. Donc si vous avez correctement configuré le serveur DHCP, il n&#x27;y a pas d&#x27;action particulière à entreprendre. Vérifiez simplement avec la commande <code>ipconfig.exe</code> que l&#x27;adresse IP est bien configurée. Le quatrième bloc devrait normalement être 100 ou plus, puisque c&#x27;est ainsi que l&#x27;étendue DHCP devrait être configurée.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="étape-4-test-de-résolution-dns">Étape 4: Test de résolution DNS<a href="#étape-4-test-de-résolution-dns" class="hash-link" aria-label="Lien direct vers Étape 4: Test de résolution DNS" title="Lien direct vers Étape 4: Test de résolution DNS">​</a></h3><p>Tout d&#x27;abord, assurez-vous que la machine que vous souhaitez joindre à votre domaine dispose d&#x27;une connectivité à au moins un contrôleur de domaine, et surtout que la zone DNS du domaine Active Directory soit résolvable. Généralement, les résolveurs correspondent aux adresses IP des contrôleurs de domaine.</p><ul><li>Si cet hôte a été configuré de manière statique, assurez-vous de lui configurer un résolveur appartenant au domaine (l&#x27;adresse d&#x27;un contrôleur de domaine).</li><li>Si cet hôte a été configuré par DHCP, assurez-vous que ce dernier lui a configuré un résolveur appartenant au domaine (option 6).</li></ul><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>attention</div><div class="admonitionContent_S0QG"><p>Il ne faut <strong>jamais</strong> configurer des résolveurs DNS publics sur une machine membre du domaine, comme <em>8.8.8.8</em>, <em>8.8.4.4</em> ou <em>1.1.1.1</em>. Puisque le domaine AD, interne et privé, n&#x27;est pas propagé dans le DNS public, ces résolveurs ne seront jamais en mesure de résoudre le <em>namespace</em> de votre domaine. Il faut impérativement que les clients DNS soient configurés avec <strong>uniquement</strong> des résolveurs internes, généralement les contrôleurs de domaine.</p></div></div><p>Pour tester la résolution DNS, vous pouvez lancer la commande suivante:</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">PowerShell</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Cmd</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">Resolve-DnsName</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">Name </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;auto.cemti.ca&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">nslookup auto.cemti.ca</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="étape-5-jonction-au-domaine">Étape 5: Jonction au domaine<a href="#étape-5-jonction-au-domaine" class="hash-link" aria-label="Lien direct vers Étape 5: Jonction au domaine" title="Lien direct vers Étape 5: Jonction au domaine">​</a></h3><p>Pour joindre la machine au domaine, vous pouvez utiliser la commande PowerShell <code>Add-Computer</code>. La commande suivante redémarrera automatiquement la machine; si vous ne souhaitez pas qu&#x27;elle redémarre maintenant, ne spécifiez pas <code>-Restart</code>. Sachez cependant que le nouveau nom ne prendra effet qu&#x27;après un redémarrage complet de la machine.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">Add-Computer</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">DomainName </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;auto.cemti.ca&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">Restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>astuce</div><div class="admonitionContent_S0QG"><p>On peut utiliser cette commande pour créer le compte ordinateur dans une unité d&#x27;organisation de notre choix, plutôt que dans le conteneur par défaut &quot;computers&quot;. Cela peut s&#x27;avérer utile dans un domaine où notre compte n&#x27;est pas administrateur de domaine et ne dispose de droits de création de comptes ordinateurs que dans certains OU spécifiques, ou encore pour faire en sorte qu&#x27;il reçoive des GPO. </p><p>Pour spécifier l&#x27;OU dans lequel créer le compte ordinateur, il suffit de passer le nom distinctif (<em>DistinguishedName</em>) de l&#x27;unité d&#x27;organisation ou du conteneur dans lequel créer le nouvel objet.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token variable" style="color:rgb(9, 134, 88)">$AddComputerSplat</span><span class="token plain"> = @</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    DomainName = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;auto.cemti.ca&quot;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    OUPath = </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;OU=Portables,OU=Ordinateurs,DC=auto,DC=cemti,DC=ca&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">Add-Computer</span><span class="token plain"> @AddComputerSplat</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="préparation-de-votre-machine-de-développement">Préparation de votre machine de développement<a href="#préparation-de-votre-machine-de-développement" class="hash-link" aria-label="Lien direct vers Préparation de votre machine de développement" title="Lien direct vers Préparation de votre machine de développement">​</a></h2><p>Si vous avez déjà préparé une VM avec vos outils de développement (VS Code, Git, etc.), vous pouvez simplement la connecter dans votre réseau privé, la laisser prendre sa configuration par DHCP, la renommer &quot;PCDEV&quot; puis la joindre au domaine!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consoles-dadministration-rsat">Consoles d&#x27;administration (RSAT)<a href="#consoles-dadministration-rsat" class="hash-link" aria-label="Lien direct vers Consoles d&#x27;administration (RSAT)" title="Lien direct vers Consoles d&#x27;administration (RSAT)">​</a></h3><p>Les outils d&#x27;administration à distance (Remote Server Administration Tools, RSAT) désignes les consoles d&#x27;administration graphiques qui s&#x27;installent avec un rôle sur un serveur. Mais il est généralement possible d&#x27;installer les consoles sur un autre serveur, ou même sur un poste client, afin que l&#x27;administrateur puisse manipuler les consoles d&#x27;administration sans devoir démarrer une session interactive sur le serveur. On peut donc installer les consoles sans installer le rôle ou le service.</p><p>Le mode d&#x27;installation de ces outils est différent selon qu&#x27;on souhaite l&#x27;installer sous Windows 10/11 ou sous Windows Server, et les commandes sont différentes. Les exemples suivants installent toutes les consoles d&#x27;administration pour Active Directory, DNS et DHCP.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sous-windows-serveur">Sous Windows Serveur<a href="#sous-windows-serveur" class="hash-link" aria-label="Lien direct vers Sous Windows Serveur" title="Lien direct vers Sous Windows Serveur">​</a></h4><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">Install-WindowsFeature</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">Name </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;RSAT-AD-Tools&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;GPMC&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;RSAT-DNS-Server&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;RSAT-DHCP&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">IncludeAllSubFeature</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sous-windows-1011">Sous Windows 10/11<a href="#sous-windows-1011" class="hash-link" aria-label="Lien direct vers Sous Windows 10/11" title="Lien direct vers Sous Windows 10/11">​</a></h4><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">Get-WindowsCapability</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">Online </span><span class="token punctuation" style="color:rgb(4, 81, 165)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">Where-Object</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"> </span><span class="token variable" style="color:rgb(9, 134, 88)">$_</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">Name </span><span class="token operator" style="color:rgb(0, 0, 0)">-Match</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;^rsat\.activedirectory|grouppolicy|dns|dhcp.*$&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">Add-WindowsCapability</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">-</span><span class="token plain">Online</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="outils-sysinternals">Outils Sysinternals<a href="#outils-sysinternals" class="hash-link" aria-label="Lien direct vers Outils Sysinternals" title="Lien direct vers Outils Sysinternals">​</a></h3><p>La suite Sysinternals est un incontournable pour tout admin réseau opérant dans un environnement Windows. Téléchargez la suite sur le <a href="https://learn.microsoft.com/fr-ca/sysinternals/downloads/sysinternals-suite" target="_blank" rel="noopener noreferrer">site de Sysinternals</a> puis extrayez le fichier ZIP dans le répertoire <code>C:\Outils</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="utilisation-de-compte-de-domaine">Utilisation de compte de domaine<a href="#utilisation-de-compte-de-domaine" class="hash-link" aria-label="Lien direct vers Utilisation de compte de domaine" title="Lien direct vers Utilisation de compte de domaine">​</a></h2><p>Lorsque vous avez effectué la promotion de votre contrôleur de domaine, le compte Administrateur local du serveur est devenu le compte Administrateur du domaine. Vous pouvez donc l&#x27;utiliser pour démarrer une session sur n&#x27;importe quelle machine jointe au domaine.</p><p>Pour l&#x27;utiliser toutefois, vous devez spécifier le nom de votre domaine, car sinon Windows pensera que vous voulez utiliser le compte Administrateur local, qui est différent. Il est important de démarrer une session avec un compte du domaine si vous voulez vous connecter à des machines distantes.</p><p><img loading="lazy" alt="login domaine" src="/3A5-Automatisation/assets/images/domain-login-696652041665cd1fec1249f3277fe3f9.png" width="335" height="519" class="img_ev3q"></p><p>Pour vous assurer que vous avez démarré une session avec un compte du domaine, lancez la commande <code>whoami</code>. Si c&#x27;est le nom de votre domaine qui est à la gauche du <em>backslash</em>, alors vous êtez bel et bien authentifiés avec un compte du domaine; si c&#x27;est plutôt le nom d&#x27;hôte de la machine, c&#x27;est que vous utilisez un compte local. Vous aurez de la difficulté à lancer des tâches administratives sur des ordinateurs distants!</p><p><img loading="lazy" alt="whoami" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAecAAACaCAYAAACTxoD/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH5woZBREuKfBtGgAAHadJREFUeJzt3U9MG2mfJ/DvU1U2ebfTOz1zae2iEM006aAot84FyAGilVZgrTbSSD4kLTHaAxBWu2EOHNLqlqbVrebgw2ve0RLCaSM1OfiUPWBugQPEF3JDLRLoQxPRrXlndmaivNMNdlU9cyg/5aqi7CpjGxfJ9yNZBrv+PPXH9avnV0/VIwBIEBERUcdJKUWc4QwAqMjG8dloQ4GIiE7D7HYB6FzodpyK2k91AJqIFZcBAAKAlLISMVi3F5uI3l8MzxRHt+NU4/1UwoAmRHM1Z9gRC6XFKxoRUdtFHZ+IgO7Hqaj9NH6lGYAKzk2ORER0Znh8ovMgYj9VGW0hxIcA/iRl4+vJBgDYonFaW0MqfgGJiNoo6vhEBHQ/TjURRz8GcEEI8UZKWa43vAEAgqemRJRQPD7ReRC5n9bqyR8DSAHQhBD/Ui9AO8FZtjdXTkTULpHHJyKg63Gqif30YziNtwHAFkL8U1iKm9eciSjZ3qPjk2VZ0HXdfVeklBBCwDRNGIbhvqvP1ftZlQ8AyuUy0uk0AMC2bWha4xZZ3jJ6xw0u67kVWXF2W3N/XH23AFQAHAF4Gxw+VqjP//1S3OKFmv1f0y2NT0T0rrNt2w1S3gB9dHSECxcuAAA0TXMDszfAnYVKpYJUyrluenx8jJ6eHrcsUYEZgBuYTdNEOp12p6frum/a74GPAdhwAvMxgF+FECcaiMWuh/+X/zoWOcz/+b//D//zb/677/3qfzq7nYeI6LxSAU4FZV3XYds2Lly4ANN0al0qENq2jXQ6Ddu2Yds2DKPzqf9UKuXWkNPpNKSU7nzj1trVOCoYq+l1KzALIbC9vY3PPvss9PsXL17gxo0biGhY3RGx7wz77e3/j3z9j7++eeI9jrUpATG1FjUUpsQwFvbjlrhqfwHDccaLO9y5s4+FYQEhqq/hBfgXcQ1TYgrBtb82JeDfJCHrf23K2W6nXnen3Kaxp31yuZLJv428631tqvb58MI+zna5Orl9KEy5XIau65BSwrIsCCHc4KvS2eVyGZqmwbIsaJrm1qLPgmVZAJxatBAClmWhUnFaKasThXovIQR+++03AE6g96bku2V7exuDwzfx4sWLE9+9ePECg8M3sb293YWSOWSU3//hoYTT1qzp1+//8LDxxPfycmhoUk4ODcn8XqMBi3ISUcN00mnn38Vy7+XlECAni/7P8kX/YMXJwDDOhxLeD6vTGvIsyF5+yPd/8zq7bkKXq/WpdqDMRVlU5dzLyyFMymL179q2qs23M8sVXq7u/ubeT6ZpStu23f/L5bK0LCt02EqlclbFkpZlyXK5LKV0yuglhIgcX9M0dzm85bZtu+7ynYXt7W2Z6rkgt7e3G37WKltWVFz8OwBTAP4bgBsA/jMAIaWE99XtZ6pgf7UAZOcwlwUKqzxFb599LEzM4npR4pH3ikT/fdwPXKEYm8tj52mgLnblGoZ2Xrm17P3VAq7n88APe+70VwtANtPfofK3LnS5EmkMY2qb9H+K6+pj37a6gmtD1aHPzXJRM6SUqFQqbs0ZcGrSqVTKrSl7a6JSSt+wnabSz6Zp+hqFqbJHvWzbBgD3OrUaXwgR65p1p3z22WcobW26NWhVYy5tbdZNd5+FpteIWtFhnzevdoDvz2SBwqo/5bq/gGE3pffK80U13bZW+97Jrg4HUoCeYfc9fy9MRQwXTDOuYUqMYxnPMXtFpeCd4aemhiGqaUZvCrI2THA8/3IJN0UZTCGeLLd3XrVVMRWSqgawv4rC80ncrtdUwDtefwbZnW/96cv+DLIoYHW/tp2uZT7F9eWn1fnv4Yfn1/FpfzPruNE2Da6XWnrXn2IPrKf9BQxPrYVsszrLdWI4539fCt9dN3H2g2C5A9sz1j7qnfdTLE/exsnN5lnfocsVtmynKEej7VN3W01hrTpvd1rB/TJ0HZGXEMJ37djbcApwGolpmuYLZmobqsDXaUdHRzAMA5ZlueVT18iF57cb9lInEioNr66bHx8fn0nZG/EG6CQEZiWyOq7S2tKJwL6/g+/BV8O09l5eDg3lpZM125N5X2q7KCc9Kdm9/JCEm2JzvoMatzgp4U25FiclVGrQl5qrjqcmWm+4YEr3xHRq0wpP6wbnGRzP839xsjqNRsM1mFdxsrYe6q7bsCIGxnPL4R1Erf+inKwOW5wMW0fNrOPG23TSl94NmVdxUg4N1dLpbmo9dJuFLFfYcIHP3OWOvR/U255x91G1LhC+DNUyBZfDv732ZH4obB9p9rdSb/s0WAe+ZZ6URfc9angKKpfLJ46huq77/hdCuMdclQ4+i7SwNyWt0u4qvR0njqhhVErbtm13/G6mtRWVym53Ols5s7S2ap3nbaUnm6w9OyntDJzEaD8yWWA2p2ojr7AzlMdctQrRf/9LTPrGHkL+8X1n3LHbmMRQLcU6dhuT2MGr0Cz5EPJqovWGu3INQ8vj4TWbwLR8ad01VVscx3LdhX6FHVXzEgJifBnP3VRxE/NSxh5BblXXQ9DzH1B3ysHxxm7jeiBzMXZ7EstP15za3PVP0Q/gyjXn8sP+qx0MXbtSt6yh67jRNt1/hR14avr99/Hl5HMni+5Jsa893UH2S5Vl8aTW622z4HKFDTd2G5NuRmANT3eqZYyzHzTcnvH30f77W86P8vZTCF8GxamRfnttD1v3PVs5uFzVTMmX98P2hJjliPzNRS3zGB4VgXExDhQf1Wr/p97n3z+qoZT3ZZrmifSwOtaqGvRZpoVVLTnOvc31xlcNxLqZzvbyprK9Ke72am5ZT71m1M6h3pu/AX4NudnneD57xU17XJl9DrgHyS7qv48tKfEYEydaz9a1v4DhcaAoJaTcQ36o0cCT1eGqr0fRt6k1rT+D7NAy4l+aHMPt67PIeYevBsW1VzuYrEbN/kwW+GH1bK83uyn2NTzdySIzlkEWP2BvfxUFZJHpR4NtFliu0OHGMJffwbcL+9hf+BY76oQx9n7Qxu059ghFdVKCfSwMTwCPpT8why3XmWt2mc9gn6eO0jTNbaWt/m+2tXXwpEIIgUql0tUgHbzGHLwG3S1NrRG1IaTnSS9hQVkN09DaUywP5bHnO0vcQ14FlP5Pcf157eCzv/Bt/dpoh/Tf38Jefgg74VVwv70f8HzoGq4A1VpMvYl+iutYxrcnamNXcG3oea291drTeMtb75oz+nH/y0ksjweCyv4CFtbCxzvR0Kg/gyxmMT4LuJXk/k9xfXkWs+715iY02qbV9eLOfn8B3y6rmrSTVSlMqMDZj0x2B09zP3gyL9XJhGyzsAZUweGcNg855EJOOhruB3W3ZxPW1jwnpGt4ujzkrO+1HGavf4nQynBwuaonYy2Vo+FvznOtv+4yr2FqHCjKIjDuua7cjnVEiWKapnudW1WugjX+4Mt7/dm2bffe7bN4slk99Rp/JSFAN326olZuve+ihlHWni5jKHBgdQ7CQ04qFWN4VHSCixACE8iGp9g6YW3KU5u/Xk0VjuH2ZKAhkNfYHPKYxRUhICZ+wHW35hwcbwyP9vKAJ2PgfF4LpkIIiKdofXnHHkHu5bEz7mmYMQFk6lVaTjQ0crYHhqq1U3d5AIQ2WoosUINt6qwXt6xXCsju1VKj/Zks8LwWOPszWews79QCaeg2C1muesP138eX15ex7A2GsfaDetuzCVde4Vv3wDUOFLdwvx/Yf7UDLI/7Dmq+FLtve/Xj/lYR1z3laLYY8X9zYcu8gIXhcezk5zBWzUSMuyd/bVhH1HWq5bi679o0TTfASimhaVrDl6qwqfEMw3CndVb3aQfduHGjbuMvFaBv3LjRhZI5TwOVUbXc/N8v4W//971TzeD3f3jIx3eeJ2tTGH41F5JGPediLNfalMDT24Fbz5LuXd1elEiqZXY7Hh2qpvHOPFs7goQNTegA8DWAXwD87H0PBuLYwbkVDM6UePsLGJ4AHtdrXEf0nlNB1NsQTNWA4wRYNYz3Pmc1Le9n76pmg3OstcHgSu+ufSwMX8Hs8yHk97YYmInq8F6qVC3GVUCN8zAUFbxVMPdOLymttpMkVs2ZiIhINezyNgpWt0VFtTNy79+tBuKwab3LOlJzJiIiCrtLJ26tNxjAG93xcx5FVnKbXEwjzkTflZVHROcPM3sUR7fjVGTmAM3tx0aciRIRdQuPT3QedKTmTERERKfX7pozm8gRERElDIMzERFRwjA4ExERdZhpmU0NbwDABx980HAg3iBORN2iOlggaqTTcert27d48+bNqcc30s09otQAGHyJKLl4fKJ3gVm2mhqeez0REVHCMDgTERElDIMzERFRwjA4ExERJQyDMxERUYtmZ2fbOj0GZyIiohaowNzOAM3gTEREdErBgNyuAM3gTEREdAreQJzP50M/Py0GZyIiohaowOwN0K1icCYiIjqlYEBuV4AWAOTFixfbMjEiIqJ3UavP1gaAjz76CAC+BvALgJ+971JKX4fPrDkTERElDIMzERFRwjA4ExERJQyDMxERUcIY3S4AERHRebC3twfDMGCaJgzDgGVZEEJASgkhRMNx/6r/L5uaF2vORERECdO24JyZ38DKzEC7JucjxABmVjYwn2l8ZtJpqhwbKzMYiDhLIiIiOi1fcBaZeWxsbLivZoJt8XEBGL7FoEVERNQiNzgPzKxgfa4PhelRjIyMYGRkBN9gAjMDMYPty2fYQhYT4+Ffi8z8ua9xSrmLxbsjGLm7iF3//eJERERtowGAEBlMZHtRyn2Oxd1a0NldfOD7v1FaV8pdPHxSwuCde6EBWK4+QO4gi6X175AJfD8ws4KN+cyJcU6myq8689/YwMbGiu/EwS2bW/OfPzGfzHz49yIzj435GXf8+UwG84F5DMys1MYNKSsREVG7ODXnq5fRhxI2iy1OrbiJUu8wbl0N/3r1wQimC32YW//eF1hf/nQA9F0ODeoHP710/x6cW8KlJ07NfroAZKvVdCEGcO/7JQxvTbu1/ulCH+a+r50oDMys4OZmLSuQKw36vsdgFpeejCJXAgbn7uD19DQKh7249Inz9e7i3ep0D1tcSURERI05wfmTS+iNMXBUWlfKVTz2BM0wu4t3MZo7QHZpvdbA68fXUCFvYGYFKzMDEGIAl/v845Zyo3iw6szXF9Cv3sJwbwlPHtYC+cuHT3wnCruLd91xAaC4WfJP/LCAx0Xgx9eHQOkJ1KT6Ltc50yAiIuqQtt9K9fLZFg4Hb55IKftUg7GbAn/5Ew56L+ETXMWtSwc4uHQLTkg8xOsfY8z0k0voPXwN/6A/4rWn5isGZrDiaey2Pjd4ugUkIiLqMCc4FzdRwiBu1q/wxiZ3F/GkNIg798JrnAMzK1hfGsbW9OjJGvjVW7j0+jE2MYxbVz/Bpd4DeLLa9f34Goe9l/CJ78NPcKnXCe5CDODeV1mgUEt7j+ZKdSZGRETUXRrgpKM3S8DgnP9a8MDMfHijq4hW18XNEnpDbqvKzG9gKXuA3Ki/4ZlTy+3DzYlh4KeXKG4eYHjiJvpO1IbrePkMW4f+E4Lx7+YweLiFZy8BJ1DXrl8LkcF3rDkTEVFCuY/vXH0wgh9nVrC0tI5s9bPDwjTu7p7ilqHiYxTuLGFi/CEerDoficw85voKmB59eOJ6tZS7+OmgF9nBEnJfAMAmDubmMFjaxK6UiLr7SspdPPw8h0vrS9ioFR7Tn6t5reKL3E2sz61jYw4ADlHIFdB3J97iqAZnWffC/Bw2NuaAUg4jagGJiIjaRACQFy9ebP+EM/NYv/PaEyCJiIjOp7dv32J7e7ulZ2v/+Z/9BQB8DeAXAD9736X0B8qOdXwhVx9ghJVKIiKiprHjCyIiooRhcCYiIkoY9udMREQU4fj4GBcuXMBvv/0GTdMghHCvORuGAdu22zo/BmciIqIIPT096O11btkRQiCVSvkahEWxYTU1v6bS2t3sz7jd/UWfppesVpef/UETEZ1PpmnCtm3oug4pJUzTPPFdo1ezzs01Z/YX3f4TlLOePhHReWUYBtLpNAzDcG+bUrdQxXk1Pb9mBlYdXyw2PZs2ePkMW/A/2OSstbr8XV1/RETUkkql4taENc2p20opoet6dO24yfhsANUHhtx8jUJfFtleoJTLAXNzGMQhCtPOozYHZlawpB6RFXgylnqC1qUnajwAnnG9w9SeslVCbvQLrErpGb/W61TwISaqv+j1O/cwUAx/sElmfgO1p3LWph/+PYDD17V5dXj5G40fvn5qvXD5xh30PAXNM52BmRV8hW/wDb5yhz0sTOPu4m7k+okz/RPje57AFmf7xSkfEVGSSSndYKzrOizLcq83q2Bdz+mvObehP2NnvNP1txxLg/6io/przsxvYA65+h1fdHD544x/9d5XyB7UyjcyMuIGOjVuruQENHeYQIDvzS5haXgL06OjGJ0uANmv3GejN1o/caYfXH+5gyyWvmuup5RG5SMiSjohhNtSW0rp1qJVkG70alYtOLehP+NSrlZTbLa/5Tga9RfdqL9mITK4OXiIwuNi/Yl3cvnjiupqM4r3eeIvf8KB56vI/qwbCFt/xceF6K5BmygfEVGSqevLmqa5ARmAez25q9ecTy2qv+U43UJWvXy2hcOlm8iIoi9lLQZm8P1SFr3egatpa1y9jD4cYLOJ+Zy13cW7mMYKltbXMQecrlONg5/cdL+Uq3jgeX5qw/UT5epl9KEXg55OUaoTwOWriL/9GpSPiCjJvIFZSum7t1m14G48gebmdzbB2dPfcu0KY62/5WY4/UVv4M69q1itXq/09desPsvMY71Br1NXL/cBiBmczsju4l2MLNYuA2zMoy29Xp1m/fi8/AkHOMTWdLCrTzX9lotIREQeZ3MrVUR/y06XkcDgzeo16oEZfN+gv+WT/UVH9NccmL/IzNcaQCWQlLt4tnXy2vSPrw9D+8mOFq8/63rTd/r77g29nKDK28z2IyKixmLVnFvtzzi6v2XnGuadpep0UUJuuoA7X9WZYKC/aCkb99cs5S4eflPA8FJ1/ocFTOeApTPqzzlq/LCW2s768V8jf/nwGxSGl7C0Xl2Jsdd/vP6sG02/+MU0Ln+/VN0+OPl9M9uPiIga6lh/zp3G/qKJiOisvH37Fm/evHGfqe295hznEZ5S2Mnoz7nT2F80ERG9q87N4zuJiIjeFwzORERECcPgTERElDAMzkRERAnD4ExERJQwDM5EREQJw+BMRESUMAzORERECcPgTERElDAMzkRERAnD4ExERJQwDM5EREQJw+BMRESUMAzORERECcPgTERElDAMzkRERAnD4ExERJQwDM5EREQJw+BMRESUMAzORERECdO24JyZ38DKzEC7JkdERPTe8gVnkZnHxsaG+2om2BYfF4DhWxgQou2FJCIiep+4wXlgZgXrc30oTI9iZGQEIyMj+AYTmBmIGWxfPsMWspgYD/9aZOaxsTLD4E1ERBRBAwAhMpjI9qKU+xyLu9L9cnfxge9/IQYws7IRGmSl3MXDJyUM3rkXGoDl6gPkDrJYWv8OGQZoIiKiupya89XL6EMJm8UWp1bcRKl3GLeuhn+9+mAE04U+zK1/H79GTkRE9J5xgvMnl9AbY2Apd7F4dwQjdxexK2XI96t4XACy9XLbAHYX72I0d4Ds0jrmMwzQREREQW2/lerlsy0cDt5snLr+8TUOgbopcCIioveZE5yLmyhhEDfrV3hjk7uLeFIaxJ174bntgZkVrC8NY2t6tG4NnIiI6H2mAU46erMEDM75rwUPzMz7/m/UIMyruFlCb8htVZn5DSxlD5Ab9Tc8IyIioho3re001gKyS+vufc5f4fHpgmjxMQqB26pEZh5zfQVMj36BVdaWiYiI6hIA5MWLF9s/4cw81u+8xvTnD5m6JiKic+3t27d48+YNhBCwLAuGYcC2bQCAEAIyIs5JYePP/+wvAOBrAL8A+Nn7LgMTMDqwDE5BVh9gZLVTUyciInp3seMLIiKihGFwJiIiShgGZyIiooRhcCYiIkoYBmciIqKEYXAmIiJKGAZnIiKihGFwJiIiShgGZyIiooRhcCYiIkoYBmciIqKEYXAmIiJKGAZnIiKihGFwJiIiShgGZyIiooRhcCYiIkoYBmciIqKEYXAmIiJKGAZnIiKimKSU0DQNtm37PosiZHPhlsGZiIgoYRiciYiIEobBmYiIKGEYnImIiE5hdna2qc+bweBMRER0SsFA3I7ADDA4ExERtUQF5HYFZoDBmYiI6FTy+bz7tzcwez8/rUQEZ8uyoGkapJQQQrifCSFg2zaklL6XEMIdTkoJ27bde86836n/zzspLdiwIIUNW5eQonpfnS2h24nYhA1pGgDYgO2UWUhACB0SGirRtwcmniVNpC+kUDaPYdsmenp6IIRwt1HSSVsHpFH97UgANqS0qt9qEEL9LjUAGqQUME0Tln0M3YhePvUbVb9N78s0zfjlDBwH+OKrna/TCgbidgRmADDaMpUWGYbhrpxgcNV1vW6A9QZoFcgtyzmoaE5EcAP/eaZrGiQAKQDYzvrRdA22aeHYrMBI690uYkOVSgWaZkBoTsCybAuwLRiGgd8ZRlMH6CSSUjr7GQSkFDg6OoJpmkileqAbOiyr0u0iRhN29TeoDlYCgIQQ8J34apoBTdOQSjnLValUoIl0w0kbhgHLslCpVJBKpdzfqJQSPT097v9RzvvvmJKt1QA9OzvbtsAMJCQ4A84BXNU2VNA1TROGYfiexALAF8iB2o9W/S+EgK4nO2A1w7ZtZxmlBtuyACEgDAOpnjQMAzDtZB/8U3raObHQBJz6lw5p2bBNC7JiAsb53lYadAip4cKF/+BmgFRSyjkx6W75ogjNqv52BNTxyTlJ1t2/bduClBps24SUErouIIQG29KgRRxFLMuCruvV8XT3N97sSVnwOEDUTq1mWdsZmIFqcO526lcFU13X3R+gCq61gx3c4O09w1E/8mC6zLKsE0H8vJK2gISApglITYNpmjBNE5qmua8kk7aALaVzYBcCmg4YmgCgQ7MlrHO+fXShoXx07AQd3YlUmqa5WZ9aivh0Or//2gC8vykVlJ2TDCGcdLbazyoVC7YNpFIG0mk9cvnK5TI0TYMQAuVyuVoDd/6vVCqxT6TP+++Ykq2VmnMnGED3z0i9Z9YqxeWtPXtrxGoFqrNvKSXS6bR7TUs981SdlYfVvM8dTYclJWAD6VQP0kYKFcupwWiaFjst2C2GloIQAKoB2irbkBDQhQGhp2AnvOYfJW2k3JNC27ZhSSdFbJoWbNtuOYvT6f3XH1y1alBWByvbbfehaRoMw4CuC1iWrGYFNEjZuHw9PT2+36u6jJVKpQDg3F/WoHdD0k7+DACJSAEb1WuP3rKk02lUKv4Dd7AxGOAEd+91MSllLRX8DtB70qgcHePYrMC0reo6ku5yJmH7NWLZNqRtQcBGShPQjB5IaDAtiV9NE79LJbv8UY7KxxBCIJ1OQ0gJDRKa5gTq36UMlFtsFNbp7ev8jGq/Fef3ZUPCCdop4wMAQMU8di81qaCtReW04fxOj4+Poeu6eyKtArvKMMRx7k+yiZpgAOh6zcv5sQO//vorPvjgAxiGgaOjI/fM2pvK9qZxVQMwdUavPtM0zT0IlMtl97vz6tdyBT3pHqR1AatcgV1tya4a6yQtHRNkawIpTSAFDbCcbVIRAtLogbjwO1jlX7tdxJYY6RSktGBZFZhmBel0GoYAjssVQFOtnE/vbH6fNpxyOhkoiUr1OrOFfzsCPvroP8LQ0zg6/hN0XYemAbbttMSvVBqXT9d19PT0AHBq0X/84x/x4YcfulmuuMuXtJoNUSc5TTKJiIjoLHwN4BcAP3vfZaCWZUjnngmXEOJDAB+HvIiIiKg1/wDgHwH8M4B/BfA2GJiB8Fup/gTgAoAUAHUxiBd7iIiIWvePAP4JTnB+AyfmnnAiOEsppRDiDWoXyiwA57s5LRERUTL8s+f1JqzWDNR5CImUsiyE+Bc4NeYKgONOlZKIiOg98q9wasxvpJTlegOJRi19hdM88iKAD9tePCIiovfPWwB/qldjVhoGZ3cg3sNARETUsqigrMQKzkRERHR23o1HaBEREb1DGJyJiIgShsGZiIgoYf4dhgpL/7ZeBL8AAAAASUVORK5CYII=" width="487" height="154" class="img_ev3q"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Pages de documentation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#architecture-de-lenvironnement-de-labo" class="table-of-contents__link toc-highlight">Architecture de l&#39;environnement de labo</a></li><li><a href="#montage-de-la-passerelle-pfsense" class="table-of-contents__link toc-highlight">Montage de la passerelle (pfSense)</a></li><li><a href="#montage-du-contrôleur-de-domaine" class="table-of-contents__link toc-highlight">Montage du contrôleur de domaine</a><ul><li><a href="#étape-1-clonage-de-la-machine-virtuelle" class="table-of-contents__link toc-highlight">Étape 1: Clonage de la machine virtuelle</a></li><li><a href="#étape-2-changement-du-nom-dhôte" class="table-of-contents__link toc-highlight">Étape 2: Changement du nom d&#39;hôte</a></li><li><a href="#étape-3-configuration-du-réseau" class="table-of-contents__link toc-highlight">Étape 3: Configuration du réseau</a></li><li><a href="#étape-4-promotion" class="table-of-contents__link toc-highlight">Étape 4: Promotion</a></li><li><a href="#étape-5-installation-du-service-dhcp" class="table-of-contents__link toc-highlight">Étape 5: Installation du service DHCP</a></li><li><a href="#étape-6-configuration-de-létendue-dhcp" class="table-of-contents__link toc-highlight">Étape 6: Configuration de l&#39;étendue DHCP</a></li></ul></li><li><a href="#montage-des-autres-machines" class="table-of-contents__link toc-highlight">Montage des autres machines</a><ul><li><a href="#étape-1-clonage-des-machines-virtuelles" class="table-of-contents__link toc-highlight">Étape 1: Clonage des machines virtuelles</a></li><li><a href="#étape-2-changement-du-nom-dhôte-1" class="table-of-contents__link toc-highlight">Étape 2: Changement du nom d&#39;hôte</a></li><li><a href="#étape-3-configuration-du-réseau-1" class="table-of-contents__link toc-highlight">Étape 3: Configuration du réseau</a></li><li><a href="#étape-4-test-de-résolution-dns" class="table-of-contents__link toc-highlight">Étape 4: Test de résolution DNS</a></li><li><a href="#étape-5-jonction-au-domaine" class="table-of-contents__link toc-highlight">Étape 5: Jonction au domaine</a></li></ul></li><li><a href="#préparation-de-votre-machine-de-développement" class="table-of-contents__link toc-highlight">Préparation de votre machine de développement</a><ul><li><a href="#consoles-dadministration-rsat" class="table-of-contents__link toc-highlight">Consoles d&#39;administration (RSAT)</a></li><li><a href="#outils-sysinternals" class="table-of-contents__link toc-highlight">Outils Sysinternals</a></li></ul></li><li><a href="#utilisation-de-compte-de-domaine" class="table-of-contents__link toc-highlight">Utilisation de compte de domaine</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Sources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/departement-info-cem/3A5-Automatisation" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Vincent Carrier. Tous droits réservés.</div></div></div></footer></div>
<script src="/3A5-Automatisation/assets/js/runtime~main.feacf08f.js"></script>
<script src="/3A5-Automatisation/assets/js/main.dc9c861e.js"></script>
</body>
</html>